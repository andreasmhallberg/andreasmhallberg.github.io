<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <meta charset=utf8>
</head>
<body>
<table>
<tbody>
<tr class="odd">
<td align="left">layout: post</td>
</tr>
<tr class="even">
<td align="left">title: Typing Swedish with American keyboard layout in Vim</td>
</tr>
<tr class="odd">
<td align="left">permalink: /swewithusakblayout/</td>
</tr>
<tr class="even">
<td align="left">language: en</td>
</tr>
<tr class="odd">
<td align="left">tags:</td>
</tr>
<tr class="even">
<td align="left">- Vim</td>
</tr>
</tbody>
</table>
<h2 id="using-the-american-keyboard-layout">Using the American keyboard layout</h2>
<p>When writing some sort of computer code, the American keyboard layout is more convenient than the Swedish one I had learned to use since most of the meta characters, <code>\</code> and <code>{</code>, for instance, is more readily available. These are direct key presses on the American layout whereas they require combinations with the ALT-key in the Swedish layout. For writing LaTeX this makes things a lot easier since you need these particular characters also for declarations incorporated in the prose text. Since most of the things I wrote at the time were in English anyways and I didn't need the <code>å</code>, <code>ä</code>, and <code>ö</code> made accessible the Swedish layout, I used the American layout more or less permanently.</p>
<div class="figure">
<img src="/images/kblayoutusa.png" alt="American keyboard layout" /><p class="caption">American keyboard layout</p>
</div>
<div class="figure">
<img src="/images/kblayoutswe.png" alt="Swedish keyboard layout" /><p class="caption">Swedish keyboard layout</p>
</div>
<h2 id="switches-to-bad-swedish-layout">Switches to (bad) Swedish layout</h2>
<p>Now, every now and again I need to write something in Swedish. The common way of doing this - and the way I did it for a while - was to use the keyboard layout switching of the operating system. This can be set to switch between the two layouts above and it can be mapped to some easily accessed key combination. I have it set to COMMAND-SPACE. This is quite convenient, especially since it works in most applications. The problem with this is that the Swedish keyboard layout not only adds the three Swedish characters relative to the American layout, it also moves a whole bunch characters around, including <code>?</code>, <code>:</code>, <code>;</code>, <code>-</code>, <code>&quot;</code>, <code>&amp;</code>, <code>*</code>, <code>\</code>, <code>/</code>, <code>`</code>, and all three pairs of brackets (<code>[</code>, <code>(</code>, <code>{</code>). So if you are used to the position of the positioning of these characters in the American layout, things get very confusing, even when writing normal prose.</p>
<h2 id="swedish-in-vim">Swedish in Vim</h2>
<p>A solution in Vim to this problem is to configure a pseudo-Swedish keyboard layout that only adds the <code>å</code>, <code>ä</code>, and <code>ö</code> without moving other characters around. Adding these keyes according to their normal mappings in the Swedish layout to the American layout covers some characters however. More specifically:</p>
<p><code>å</code> | covers | <code>[</code> <code>Å</code> | covers | <code>{</code> <code>ä</code> | covers | <code>'</code> <code>Ä</code> | covers | <code>&quot;</code> <code>ö</code> | covers | <code>;</code> <code>Ö</code> | covers | <code>:</code></p>
<p>Mapping these covered characters to other physical keys on the keyboard is utterly annoying if your are often switching between layouts. Instead, I opted to have the covered keys with double key presses, so that pressing <code>åå</code> produces <code>[</code>, <code>ÅÅ</code> produces <code>{</code>, etc. Luckily, in Swedish you never type. This, I believe, is a much smaller adaptation of the American layout, that remapping them to other keyes and a lot easier to get used to.</p>
<p>Switching from the American layout, which is superior if programming is involved due to non-alphabetical characters being more accessible, to a layout including Swedish characters thus requires a minimal layout change, and no relearning of key position, and no relearning of key positions.</p>
<p>This setup is accomplished by having the code below in the <code>.vimrc</code>. This code maps the pseudo-Swedish layout described above to <code>\s</code> (or whatever you have the leader key set to). <code>\e</code> switches back to American layout, basically by re- and undoing the Swedish mappings. The switches also changes the language of the spell checker according to the language you are writing in. Note that the code below also remaps the <code>r</code> operation to work as expected with the appropriate keys.<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup></p>
<pre class="vim"><code>&quot; Switch to Swedish
function! SweType()
  set spelllang=sv
  inoremap ; ö
  nnoremap r; rö
  inoremap ;; ;
  nnoremap r;; r;
  inoremap : Ö
  nnoremap r: rÖ
  inoremap :: :
  nnoremap r:: r:
  inoremap [ å
  nnoremap r[ rå
  inoremap { Å
  nnoremap r{ rÅ
  inoremap &#39; ä
  nnoremap r&#39; rä
  inoremap &#39;&#39; &#39;
  nnoremap r&#39;&#39; r&#39;
  inoremap &quot; Ä
  nnoremap r&quot; rÄ
  inoremap &quot;&quot; &quot;
  nnoremap r&quot;&quot; r&quot;
  inoremap [[ [
  nnoremap r[[ r[
  inoremap {{ {
  nnoremap r{{ r{
endfunction
nmap &lt;Leader&gt;s :&lt;C-U&gt;call SweType()&lt;CR&gt;

&quot; Switch to English
function! EngType()
  set spelllang=en_us
  inoremap ; ;
  unmap r;
  iunmap ;;
  unmap r;;
  inoremap : :
  unmap r:
  iunmap ::
  unmap r::
  inoremap [ [
  unmap r[
  iunmap [[
  unmap r[[
  inoremap { {
  unmap r{
  iunmap {{
  unmap r{{
  inoremap &#39; &#39;
  unmap r&#39;
  iunmap &#39;&#39;
  unmap r&#39;&#39;
  inoremap &quot; &quot;
  unmap r&quot;
  iunmap &quot;&quot;
  unmap r&quot;&quot;
endfunction
nmap &lt;Leader&gt;e :&lt;C-U&gt;call EngType()&lt;CR&gt;</code></pre>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="http://vi.stackexchange.com/questions/5517/imap-and-the-r-operation"><code class="url">http://vi.stackexchange.com/questions/5517/imap-and-the-r-operation</code></a><a href="#fnref1">↩</a></p></li>
</ol>
</div>
</body>
</html>
